# Колаборативен манипулационен робот UR5

### Описание на манипулационния робот

Колаборативен робот, още наричан кобот, е робот, който може да работи заедно с хора и с други коботи. Колаборативните роботи са сравнително малки по размер и могат да изпълняват разнообразни задачи във всякакви среди.

Преди всичко, те са безопасни. Предимството на коботите пред роботите е, че първите са направени да работят заедно с хора. Те са чувствителни и имат усещане за допир и за заобикалящата ги среда. Не е необходимо коботите да бъдат заграждани от предпазни стъкла, защото рисковете за инцидент са ниски.

UR5 е индустриална роботизирана ръка, която е проектирана да симулира повтарящи се ръчни задачи, с полезен товар до $5 кг$. Радиусът й на работа е $850 мм$. Теглото на робота достига $18.4 кг$. Идеален е за изпълнение на леки задачи като опаковане, сглобяване или тестване. UR5 има 6 отделни ротационни стави, всяка от които има обсег $$\pm360&deg;$$. Всяка става се движи със скорост $180&deg;/сек$, а хващачът се движи със скорост $1 м/сек$. Роботът има повторяемост от $\pm0.1 мм$, което означава, че разминаването в позициите при изпълнение на едно и също движение в пространството няколко пъти е от порядъка на $0.1 мм$.

![image](https://github.com/user-attachments/assets/43c01414-b9d0-4ec4-90d0-388a9a8d0e38)


### Решение на правата задача на кинематиката

Правата задача е необходима, за да се планира движението на робота.

За решението ѝ се използва `Product of exponentials` формулата. За нея е необходимо да бъдат дефинирани две координатни системи – една в основата на робота и една при хващача. Последната се описва с матрица $М_{4x4}$, която дава информация за ротацията и транслацията на хващача спрямо основата на робота като всички стави са завъртени на 0&deg;.

На всяка става се прилага винтово движение, като за става $n$ това движение се бележи с $S_{n} = (w_{n}, v_{n})$. В случая, UR5 има 6 ротационни стави. Тогава $w_{n} \in \mathbb{R}$ е единичен вектор ориентиран в положителната посока на въртене на става $n$. $v_{n} = - w_{n} × q_{n}$, където $q_{n}$ е произволна точка от оста на въртене.

Задачата се решава за дадена $\theta = (\theta_{1}, \theta_{2}, \theta_{3}, \theta_{4}, \theta_{5}, \theta_{6})$, където $\theta_{i}$ е ъгълът на завъртане на става $i \in \\{1, …, 6\\}$.

Решаването на задачата се състои в това по дадените ъгли да се определи положението на хващача спрямо координатната система в основата на робота.

След като бъдат получени $(\theta_{1}, \theta_{2}, \theta_{3}, \theta_{4}, \theta_{5}, \theta_{6})$ и се съставят $S_{i}$ и $М$, тогава решение се дава по следната формула:

$T(\theta) = e^{[S_{1}]\theta_{1}} * e^{[S_{2}]\theta_{2}} * e^{[S_{3}]\theta_{3}} * e^{[S_{4}]\theta_{4}} * e^{[S_{5}]\theta_{5}} * e^{[S_{6}]\theta_{6}} * M,$

като $e^{[S_{i}]\theta_{i}} * М$ описва промяната в положението и ориентацията на хващача след извършване на ротацията на става $i$.

### Дефиниране на задачата, която ще изпълнява робота

Роботът ще изпълнява задача от вида `Pick-and-Place`. Целта е да се вземе даден предмет от дадена позиция и да се премести на друго място или да се постави в контейнер. В случая, предметът е топче, което трябва да бъде взето от робота и да бъде поставено в контейнер тип кутия.

За целта координатите на позицията на топчето ще бъдат дадени като вход за обратната задача на кинематиката. Последната ще върне като решение ъглите, на които трябва да се ротират ставите на робота, така че хващачът да може да вземе топчето.

След това координатите, описващи позицията на кутията, ще бъдат подадени на алгоритъма, който решава обратната задача. Така ще бъдат известни ъглите, на които трябва да бъдат завъртени ставите на робота, така че хващачът да заеме подходяща позиция за поставяне на взетото топче в кутията.

Как точно ще бъде извършено придвижването от позиция „вземи топчето“ до позиция „пусни топчето в кутията“ е проблем, който се решава от закона за управление на робота.

### Решение на обратната задача на кинематиката спрямо дефинираната задача

Обратната задача на кинематиката има за цел по дадени желани позиция и ориентация на хващача да пресметне на какъв ъгъл трябва да се завърти всяка става на робота, така че след завъртане да бъдат удовлетворени дадените позиция и ориентация.

За решението на задачата и имплементиране на алгоритъм беше използван един paper на Rasmus Skovgaard Andersen. Линк към въпросната работа е посочен в раздела `Източници`.
Също така бяха използвани DH параметрите на UR5e робота, като линк към съответната страница е посочен в `Източници`.

### Описание на подхода за управление на робота

Чрез закона за управление се изпълнява планираното движение. При планирането се определят нужните скорости на движение във всяка става във всеки един момент от време, за да се извърши преместването. Законът за управление има за задача да изпълни планираното движение.

### Имплементиране на контролер в симулационната среда Webots за робот UR5e, като се използва вградения модел в Webots

Да се види `.wbt` файла.

### Източници

  - https://cyberbotics.com/doc/guide/ure
  - https://cyberbotics.com/doc/guide/gripper-actuators#robotiq-3f-gripper
  - https://www.universal-robots.com/articles/ur/application-installation/dh-parameters-for-calculations-of-kinematics-and-dynamics/
  - http://rasmusan.blog.aau.dk/files/ur5_kinematics.pdf
  - https://github.com/mc-capolei/python-Universal-robot-kinematics/blob/master/universal_robot_kinematics.py

